<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Fortune Cookie Game</title>

  <style>
    :root{
      --bg1:#fff7ed;
      --bg2:#fdf2e9;
      --text:#5c3a12;
      --muted: rgba(92,58,18,.65);
      --card:#fffbeb;
      --shadow: 0 18px 50px rgba(0,0,0,.12);

      --cookie1:#f3c27a;
      --cookie2:#e4a74a;
      --cookie3:#d89b3f;
      --cookie4:#c98e36;

      --border: rgba(92,58,18,.10);
      --pill: rgba(255,255,255,.55);

      --good: rgba(228,167,74,.20);
      --bad: rgba(92,58,18,.18);

      --rare1:#ff4fd8;
      --rare2:#ffb84d;
    }

    *{margin:0;padding:0;box-sizing:border-box;}
    html,body{height:100%;overflow:hidden;}
    body{
      display:flex;align-items:center;justify-content:center;
      font-family:'Poppins','Helvetica Neue',sans-serif;
      background: radial-gradient(circle, var(--bg1), var(--bg2));
      -webkit-tap-highlight-color:transparent;
    }

    .wrap{
      width:min(420px, 92vw);
      padding: 22px 18px 18px;
      display:flex;flex-direction:column;align-items:center;gap:14px;
    }

    /* Top minimal bar */
    .topbar{
      width:100%;
      display:flex;align-items:center;justify-content:space-between;
      padding: 10px 12px;
      border-radius: 16px;
      background: var(--pill);
      border: 1px solid rgba(255,255,255,.7);
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
      backdrop-filter: blur(10px);
    }

    .brand{
      display:flex;flex-direction:column;line-height:1.05;
    }
    .brand .title{
      font-size: .95rem;
      font-weight: 700;
      color: var(--text);
      letter-spacing: .2px;
    }
    .brand .sub{
      font-size: .78rem;
      color: var(--muted);
      font-weight: 600;
    }

    .mode-pill{
      display:flex;align-items:center;gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,.7);
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, box-shadow .15s ease;
      box-shadow: 0 8px 18px rgba(0,0,0,.06);
    }
    .mode-pill:active{transform: scale(.98);}
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: rgba(228,167,74,.9);
      box-shadow: 0 0 0 5px var(--good);
    }
    body.unfortunate .dot{
      background: rgba(92,58,18,.9);
      box-shadow: 0 0 0 5px var(--bad);
    }
    .mode-text{
      font-size:.85rem;
      font-weight: 800;
      color: var(--text);
    }

    /* Prompt */
    #prompt{
      text-align:center;
      font-size: 1.08rem;
      font-weight: 600;
      color: var(--text);
      opacity: 1;
      transition: opacity .35s ease;
      margin-top: 6px;
    }
    #prompt.hidden{opacity:0;}

    /* Cookie area */
    .cookie-area{
      position:relative;
      width: 260px;
      height: 210px;
      display:flex;align-items:center;justify-content:center;
      margin-top: 4px;
    }

    .fortune-cookie-wrapper{
      position:relative;
      width: 250px;
      height: 200px;
      display:flex;align-items:center;justify-content:center;
      cursor:pointer;
      animation: float 4.2s ease-in-out infinite;
      filter: drop-shadow(0 14px 18px rgba(0,0,0,.18));
      transition: transform .18s ease;
      outline:none;
    }
    .fortune-cookie-wrapper:hover{transform: translateY(-2px) scale(1.02);}
    .fortune-cookie-wrapper:active{transform: translateY(0) scale(1.00);}

    .cookie-half{
      position:absolute;
      width:150px;height:150px;
      transition: transform .95s cubic-bezier(.68,-.55,.27,1.55), opacity .7s ease .15s;
    }
    #cookie-left{transform-origin: bottom right;}
    #cookie-right{transform-origin: bottom left;}

    .fortune-cookie-wrapper.cracked #cookie-left{
      transform: translate(-78px, 18px) rotate(-30deg) scale(.92);
      opacity:0;
    }
    .fortune-cookie-wrapper.cracked #cookie-right{
      transform: translate(78px, 18px) rotate(30deg) scale(.92);
      opacity:0;
    }

    /* Paper */
    #fortune-paper{
      position:absolute;
      width: 300px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 18px 18px 16px;
      box-shadow: var(--shadow);
      text-align:center;

      opacity:0;
      transform: translateY(16px) scale(.92);
      transition: all .55s cubic-bezier(.175,.885,.32,1.22) .18s;
      pointer-events:none;
      z-index: 5;
    }
    #fortune-paper.visible{
      opacity:1;
      transform: translateY(0) scale(1);
      pointer-events:auto;
    }

    /* Rare badge (subtle) */
    #rare-badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: .76rem;
      font-weight: 900;
      color: white;
      background: linear-gradient(135deg, var(--rare1), var(--rare2));
      box-shadow: 0 10px 20px rgba(255,79,216,.18);
      opacity:0;
      transform: translateY(6px) scale(.98);
      transition: all .25s ease;
      margin-bottom: 10px;
    }
    #rare-badge.show{
      opacity:1;
      transform: translateY(0) scale(1);
    }

    #fortune-text{
      font-family: 'Caveat', cursive;
      font-size: 1.85rem;
      line-height: 1.28;
      color: var(--text);
    }

    /* Actions (minimal) */
    .actions{
      display:flex;
      gap:10px;
      margin-top: 6px;
      opacity:0;
      transform: translateY(8px);
      pointer-events:none;
      transition: all .35s ease .55s;
    }
    .actions.visible{
      opacity:1;
      transform: translateY(0);
      pointer-events:auto;
    }

    .btn{
      border:none;
      border-radius: 999px;
      padding: 12px 16px;
      font-weight: 800;
      font-size: .95rem;
      cursor:pointer;
      transition: transform .14s ease, box-shadow .14s ease, background .14s ease;
      box-shadow: 0 10px 20px rgba(0,0,0,.10);
    }
    .btn:active{transform: scale(.99);}
    .btn.primary{
      background: var(--cookie4);
      color: white;
    }
    .btn.primary:hover{background: var(--cookie2);}
    .btn.ghost{
      background: rgba(255,255,255,.85);
      border: 1px solid var(--border);
      color: var(--text);
    }

    /* Small FX canvas (local area only) */
    #fx{
      position:absolute;
      inset: 0;
      pointer-events:none;
      z-index: 4;
    }

    footer{
      margin-top: 8px;
      font-size: .78rem;
      color: rgba(189,161,126,.95);
      text-align:center;
    }

    @keyframes float{
      0%,100%{transform: translateY(0);}
      50%{transform: translateY(-12px);}
    }

    /* Optional slight vibe shift */
    body.unfortunate #fortune-paper{
      box-shadow: 0 18px 50px rgba(0,0,0,.16);
    }
  </style>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@500;600;700;800&family=Caveat:wght@700&display=swap" rel="stylesheet" />
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="title">Fortune Cookie</div>
        <div class="sub" id="subline">Tap to reveal something nice.</div>
      </div>

      <div class="mode-pill" id="mode-pill" role="button" tabindex="0" aria-label="Toggle mode">
        <div class="dot"></div>
        <div class="mode-text" id="mode-text">Lucky üòÑ</div>
      </div>
    </div>

    <p id="prompt">Tap the cookie to reveal your fortune!</p>

    <div class="cookie-area">
      <canvas id="fx"></canvas>

      <div class="fortune-cookie-wrapper" id="fortune-cookie" role="button" tabindex="0" aria-label="Fortune cookie">
        <div id="fortune-paper">
          <div id="rare-badge">‚ú® RARE ‚ú®</div>
          <p id="fortune-text"></p>

          <div class="actions" id="actions">
            <button class="btn primary" id="reset-button">New</button>
            <button class="btn ghost" id="share-button">Copy</button>
          </div>
        </div>

        <svg id="cookie-left" class="cookie-half" viewBox="0 0 100 100">
          <defs>
            <linearGradient id="grad-light" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:var(--cookie1);stop-opacity:1" />
              <stop offset="100%" style="stop-color:var(--cookie2);stop-opacity:1" />
            </linearGradient>
            <linearGradient id="grad-dark" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:var(--cookie3);stop-opacity:1" />
              <stop offset="100%" style="stop-color:var(--cookie4);stop-opacity:1" />
            </linearGradient>
          </defs>
          <path d="M 50,95 A 45,45 0 0,1 5,50 L 50,50 Z" fill="url(#grad-light)"/>
          <path d="M 50,95 A 45,45 0 0,0 95,50 L 50,50 Z" fill="url(#grad-dark)"/>
        </svg>

        <svg id="cookie-right" class="cookie-half" viewBox="0 0 100 100">
          <defs>
            <linearGradient id="grad-light-right" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:var(--cookie1);stop-opacity:1" />
              <stop offset="100%" style="stop-color:var(--cookie2);stop-opacity:1" />
            </linearGradient>
            <linearGradient id="grad-dark-right" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:var(--cookie3);stop-opacity:1" />
              <stop offset="100%" style="stop-color:var(--cookie4);stop-opacity:1" />
            </linearGradient>
          </defs>
          <path d="M 50,95 A 45,45 0 0,1 5,50 L 50,50 Z"
                fill="url(#grad-light-right)" transform="rotate(90 50 50)"/>
          <path d="M 50,95 A 45,45 0 0,0 95,50 L 50,50 Z"
                fill="url(#grad-dark-right)" transform="rotate(90 50 50)"/>
        </svg>
      </div>
    </div>

    <footer>&copy; 2025 raunak mane</footer>
  </div>

  <script>
    const fortunes = [
      "You‚Äôre not behind ‚Äî you just took the scenic route.",
      "Your future self is already proud of you (and kinda hot).",
      "You didn‚Äôt overthink it ‚Äî you pre-analyzed the situation.",
      "Some people chase peace. You mute notifications.",
      "You‚Äôre one iced coffee away from greatness.",
      "Your peace > their opinion.",
      "Your glow-up will have people checking timestamps.",
      "Keep going ‚Äî your ‚Äòaha moment‚Äô is typing‚Ä¶",
      "You don‚Äôt need a plan, you need a playlist.",
      "You‚Äôll figure it out. You always do."
    ];

    const unfortunes = [
      "You will step in something wet while wearing fresh socks.",
      "Your charger will only work at a specific angle. That angle will change daily.",
      "You will say ‚Äúyou too‚Äù after someone says ‚Äúenjoy your meal.‚Äù",
      "Your package will be ‚Äòout for delivery‚Äô for 3 business days.",
      "Your screen protector will trap exactly one dust speck in the center.",
      "Your iced coffee will be 90% ice, 10% regret.",
      "Your hoodie strings will disappear forever. No explanation.",
      "You will remember the embarrassing thing at 2:37 AM, sharp and clear."
    ];

    const rareFortunes = [
      "‚ú® RARE: Today you accidentally become the standard.",
      "‚ú® RARE: A ‚Äòyes‚Äô lands in your lap. Don‚Äôt fumble it.",
      "‚ú® RARE: Your next decision upgrades your whole storyline."
    ];
    const rareUnfortunes = [
      "‚ú® RARE: You will text ‚Äúon my way‚Äù while still in bed.",
      "‚ú® RARE: Your phone will die at 3% because it wanted to.",
      "‚ú® RARE: You will open the camera by accident in a dark room. Jumpscare."
    ];

    const cookie = document.getElementById('fortune-cookie');
    const paper = document.getElementById('fortune-paper');
    const text = document.getElementById('fortune-text');
    const prompt = document.getElementById('prompt');
    const resetBtn = document.getElementById('reset-button');
    const shareBtn = document.getElementById('share-button');
    const actions = document.getElementById('actions');
    const rareBadge = document.getElementById('rare-badge');

    const modePill = document.getElementById('mode-pill');
    const modeText = document.getElementById('mode-text');
    const subline = document.getElementById('subline');

    // FX canvas (localized)
    const fx = document.getElementById('fx');
    const ctx = fx.getContext('2d');

    let cracked = false;
    let unfortunate = false;

    function resizeFx(){
      const rect = fx.getBoundingClientRect();
      fx.width = rect.width;
      fx.height = rect.height;
    }
    window.addEventListener('resize', resizeFx);
    resizeFx();

    // Minimal particle FX near cookie
    let particles = [];
    let raf = null;

    function spawnFX(kind){
      const w = fx.width, h = fx.height;
      const originX = w/2;
      const originY = h/2 + 10;
      const count = kind === "confetti" ? 60 : 55;

      for (let i=0;i<count;i++){
        const angle = (Math.random()*Math.PI) + Math.PI; // upward-ish
        const speed = (kind==="confetti" ? 2.5 : 1.8) + Math.random()*1.6;
        particles.push({
          x: originX + (Math.random()-0.5)*12,
          y: originY + (Math.random()-0.5)*8,
          vx: Math.cos(angle)*speed*0.7 + (Math.random()-0.5)*0.6,
          vy: Math.sin(angle)*speed*0.9,
          r: (kind==="confetti" ? 3 : 2) + Math.random()*2,
          life: 0,
          max: 80 + Math.floor(Math.random()*40),
          kind
        });
      }
      if (!raf) animateFX();
    }

    function animateFX(){
      ctx.clearRect(0,0,fx.width,fx.height);
      particles = particles.filter(p => p.life < p.max);

      for (const p of particles){
        p.life++;
        p.x += p.vx;
        p.y += p.vy;
        p.vy += (p.kind==="confetti" ? 0.06 : 0.04); // gravity

        const alpha = Math.max(0, 1 - p.life/p.max);
        ctx.globalAlpha = alpha;

        if (p.kind === "confetti"){
          // warm palette, subtle
          ctx.fillStyle = `hsla(${35 + Math.random()*35}, 85%, 58%, ${alpha})`;
          ctx.fillRect(p.x - p.r, p.y - p.r, p.r*2, p.r*2);
        } else {
          // ash dots
          ctx.fillStyle = `rgba(92,58,18,${0.35*alpha})`;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          ctx.fill();
        }
      }

      if (particles.length){
        raf = requestAnimationFrame(animateFX);
      } else {
        cancelAnimationFrame(raf);
        raf = null;
        ctx.clearRect(0,0,fx.width,fx.height);
      }
      ctx.globalAlpha = 1;
    }

    function setMode(isUnfortunate){
      if (cracked) return; // keep clean UX
      unfortunate = isUnfortunate;

      document.body.classList.toggle('unfortunate', unfortunate);
      modeText.textContent = unfortunate ? "Unfortunate üòà" : "Lucky üòÑ";
      subline.textContent = unfortunate ? "Lowkey cursed. Highkey funny." : "Tap to reveal something nice.";
      prompt.textContent = unfortunate ? "Tap the cookie‚Ä¶ if you dare üòà" : "Tap the cookie to reveal your fortune!";
    }

    function pickFortune(){
      const rare = Math.random() < 0.02; // 2%
      const list = unfortunate ? (rare ? rareUnfortunes : unfortunes) : (rare ? rareFortunes : fortunes);
      return { msg: list[Math.floor(Math.random()*list.length)], rare };
    }

    function crack(){
      if (cracked) return;
      cracked = true;

      prompt.classList.add('hidden');
      cookie.classList.add('cracked');

      const { msg, rare } = pickFortune();
      text.textContent = msg;

      paper.classList.add('visible');
      actions.classList.add('visible');
      rareBadge.classList.toggle('show', rare);

      if (navigator.vibrate) navigator.vibrate(20);
      spawnFX(unfortunate ? "ash" : "confetti");
    }

    function reset(){
      cracked = false;
      paper.classList.remove('visible');
      actions.classList.remove('visible');
      rareBadge.classList.remove('show');

      setTimeout(() => {
        cookie.classList.remove('cracked');
        prompt.classList.remove('hidden');
      }, 250);
    }

    async function copy(){
      const msg = text.textContent?.trim();
      if (!msg) return;

      const payload = (unfortunate ? "üòà " : "üòÑ ") + msg;
      try{
        await navigator.clipboard.writeText(payload);
        const old = shareBtn.textContent;
        shareBtn.textContent = "Copied ‚úÖ";
        if (navigator.vibrate) navigator.vibrate(12);
        setTimeout(()=> shareBtn.textContent = old, 800);
      }catch{
        alert("Couldn‚Äôt copy. Try selecting the text manually.");
      }
    }

    // Events
    cookie.addEventListener('click', crack);
    cookie.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){e.preventDefault();crack();}});
    resetBtn.addEventListener('click', reset);
    shareBtn.addEventListener('click', copy);

    modePill.addEventListener('click', ()=> setMode(!unfortunate));
    modePill.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){e.preventDefault(); setMode(!unfortunate); }});

    // init
    setMode(false);
  </script>
</body>
</html>
